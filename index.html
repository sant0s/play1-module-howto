<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Creating and releasing a Play 1 module by sant0s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Creating and releasing a Play 1 module</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/sant0s/play1-module-howto" class="btn">View on GitHub</a>
      <a href="https://github.com/sant0s/play1-module-howto/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sant0s/play1-module-howto/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="creating-and-releasing-a-play-1-module" class="anchor" href="#creating-and-releasing-a-play-1-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating and releasing a Play 1 module</h1>

<p>The sections below describe the steps required to create and release a Play 1 module along with a corresponding sample application:</p>

<ul>
<li>The steps are based on how <a href="http://sant0s.github.io/play1-chart/" target="_blank">Play 1 Chart</a> was created</li>
<li>Some steps may be redundant or missing</li>
<li>The order of the steps is not strict i.e. some steps may be executed earlier/later than specified</li>
<li>Some steps may vary according to user preferences (e.g. preferred text editor)</li>
<li>
<code>&lt;&gt;</code> refers to a placeholder (e.g. <code>&lt;module&gt;</code> is a placeholder for a module name)</li>
<li>Linux, Eclipse and Play 1.3 are assumed to be part of the development environment</li>
<li>UNIX commands are assumed to take place on the path determined by the most recently executed <code>cd</code> command</li>
</ul>

<h2>
<a id="create-module" class="anchor" href="#create-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create module</h2>

<ol>
<li>Create module: <code>play new-module &lt;module&gt;</code>

<ul>
<li>The module name must match regex <code>[a-zA-Z]+</code>
</li>
</ul>
</li>
<li>Build module: <code>cd &lt;module&gt;; play build-module</code>

<ul>
<li>Press enter when asked about required Play Framework versions</li>
</ul>
</li>
<li>Add JAR files required by the module to the <code>lib</code> directory</li>
<li>Eclipsify module: <code>cd ..; play eclipsify &lt;module&gt;</code>
</li>
<li>Import module project into Eclipse:

<ul>
<li><code>File -&gt; Import -&gt; General -&gt; Existing Project into Workspace</code></li>
</ul>
</li>
<li>Add module code to the <code>src</code> directory under package <code>play.modules.&lt;module&gt;</code>
</li>
<li>Add module fast tags to under <code>app/tags</code>
</li>
<li>Write and execute tests</li>
<li>Add documentation to <code>documentation/manual/home.textile</code>
</li>
<li>Document all public API methods using Javadoc</li>
<li>Execute <code>play javadoc</code> and check that:

<ol>
<li>All public API methods are documented</li>
<li>No module related Javadoc errors are found in log files (under the <code>logs</code> directory)</li>
</ol>
</li>
<li>Check that no code problems are reported by Eclipse</li>
<li>Check that no unnecessary logging is generated by the module (search the code for <code>Logger</code>)</li>
<li>Build module: <code>cd &lt;module&gt;; play build-module</code>

<ul>
<li>Press enter when asked about required Play Framework versions</li>
</ul>
</li>
</ol>

<h2>
<a id="create-module-sample-application" class="anchor" href="#create-module-sample-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create module sample application</h2>

<ol>
<li>Create sample application under the module's directory: <code>cd &lt;module&gt;; play new samples-and-tests; cd samples-and-tests</code>

<ul>
<li>Enter <code>Play &lt;module&gt; Module App</code> when asked about the application name</li>
</ul>
</li>
<li>Add <code>samples-and-tests/app</code> as a source folder in Eclipse (in order to navigate through source files)</li>
<li>Set <code>&lt;module&gt;</code> as a sample application's dependency during development: see <a href="#appendixa">Appendix A</a>
</li>
<li>Resolve dependencies: <code>play deps</code>
</li>
<li>File <code>&lt;module&gt;</code> shows up under the modules directory and its content is the path to the module</li>
<li>Check that the module can be used:

<ol>
<li>
<code>play &lt;module&gt;:hello</code>: <code>Hello</code> is displayed</li>
<li>
<code>play run</code>: <code>INFO ~ Module &lt;module&gt; is available (&lt;path to module&gt;)</code> is displayed</li>
</ol>
</li>
<li>Implement the sample application</li>
<li>Write and execute tests</li>
</ol>

<h2>
<a id="release-module" class="anchor" href="#release-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release module</h2>

<ol>
<li><code>cd &lt;module&gt;</code></li>
<li>Remove unnecessary files/directories (e.g. <code>conf/messages</code>, <code>conf/routes</code>)</li>
<li>
<code>rm -fr dist; play build-module</code>

<ul>
<li>Press enter when asked about required Play Framework versions</li>
</ul>
</li>
<li>Test the sample application

<ol>
<li><code>cd samples-and-tests</code></li>
<li>
<code>play test</code> and execute automated tests (<code>http://localhost:9000/@tests</code>)</li>
<li>
<code>play clean; play deps; play run</code> and test manually (<code>http://localhost:9000</code>)</li>
</ol>
</li>
<li>Configure the sample application for release

<ol>
<li>Add <code>&lt;module&gt;</code> as a sample application's dependency for release: see <a href="#appendixb">Appendix B</a>
</li>
<li><code>play deps; play clean</code></li>
<li>Remove unnecessary directories: <code>javadoc</code>, <code>modules</code> and <code>test-result</code>
</li>
<li>Check that no unnecessary files exist</li>
</ol>
</li>
<li>Configure the module for release and archive it

<ol>
<li>Set <code>&lt;module&gt;</code> dependencies for release: see <a href="#appendixc">Appendix C</a>
</li>
<li>
<code>cd &lt;module&gt;; rm -fr dist; play build-module</code>

<ul>
<li>Press enter when asked about required Play Framework versions</li>
</ul>
</li>
<li>A zip file is generated under <code>&lt;module&gt;/dist</code>
</li>
<li>Exclude unnecessary files from the module's zip file: <code>zip -d &lt;module&gt;-&lt;version&gt;.zip README commands.pyc</code>
</li>
<li>Exclude any other unnecessary files/directories:

<ol>
<li>Files: <code>.classpath</code>, <code>.project</code>, <code>.gitignore</code>
</li>
<li>Directories: <code>.settings</code>, <code>eclipse</code>, <code>javadoc</code>, <code>logs</code>, <code>.git</code>, empty directories (e.g. <code>public</code>)</li>
</ol>
</li>
<li>Archive the module's zip file under a release directory (e.g. outside the module directory, in a directory named <code>&lt;release date&gt;</code>)</li>
<li><code>rm -fr dist</code></li>
</ol>
</li>
<li>Add module to local Git repository: see <a href="#appendixd">Appendix D</a>
</li>
<li>Publish module on GitHub: see <a href="#appendixe">Appendix E</a>
</li>
<li>Create module web page in GitHub: see <a href="#appendixf">Appendix F</a>
</li>
<li>Post a module registration request on the play-framework Google Group using the e-mail template specified in <a href="#appendixg">Appendix G</a>
</li>
</ol>

<h2>
<a id="appendix-a---sample-application-dependencies-during-development" class="anchor" href="#appendix-a---sample-application-dependencies-during-development" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixa"></a>Appendix A - Sample application dependencies during development</h2>

<p>In order to set <code>&lt;module&gt;</code> as a sample application's dependency during development, set the contents of the sample application's <code>conf/dependencies.yml</code> to:</p>

<pre><code># Application dependencies

require:
    - play
    - &lt;module&gt; -&gt; &lt;module&gt; &lt;version&gt;

repositories:
    - &lt;repository&gt;:
        type: local
        artifact: "&lt;path to module&gt;"
        contains:
            - &lt;module&gt; -&gt; *
</code></pre>

<p>where  is the module version (e.g. <code>0.1</code>).</p>

<p><strong>NB: <code>dependencies.yml</code> must not include any tab characters.</strong></p>

<h2>
<a id="appendix-b---sample-application-dependencies-for-release" class="anchor" href="#appendix-b---sample-application-dependencies-for-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixb"></a>Appendix B - Sample application dependencies for release</h2>

<p>In order to set <code>&lt;module&gt;</code> as a sample application's dependency for release, set the contents of the sample application's <code>conf/dependencies.yml</code> to:</p>

<pre><code># Application dependencies

require:
    - play -&gt; &lt;module&gt; &lt;version&gt;
</code></pre>

<p>where  is the module version (e.g. <code>0.1</code>).</p>

<p><strong>NB: <code>dependencies.yml</code> must not include any tab characters.</strong></p>

<h2>
<a id="appendix-c---module-dependencies-for-release" class="anchor" href="#appendix-c---module-dependencies-for-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixc"></a>Appendix C - Module dependencies for release</h2>

<p>In order to configure the module's dependencies for release, set the contents of the module's <code>conf/dependencies.yml</code> to:</p>

<pre><code>self: play -&gt; &lt;module&gt; &lt;version&gt;

require:
    - &lt;module&gt;
</code></pre>

<p>where  is the module version (e.g. <code>0.1</code>).</p>

<p><strong>NB: <code>dependencies.yml</code> must not include any tab characters.</strong></p>

<h2>
<a id="appendix-d---add-module-to-local-git-repository" class="anchor" href="#appendix-d---add-module-to-local-git-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixd"></a>Appendix D - Add module to local Git repository</h2>

<ol>
<li><code>cd &lt;module_directory&gt;</code></li>
<li>
<p><code>git init</code>1. <code>vi .gitignore</code> and include (at least):</p>

<pre><code>.classpath
eclipse
.project
.settings
commands.pyc
</code></pre>
</li>
<li>
<p><code>vi .gitignore</code> and include (at least):</p>

<pre><code>.classpath
eclipse
.project
.settings
commands.pyc
</code></pre>
</li>
<li>
<p><code>vi README</code> (recommended for all GitHub repositories):</p>

<pre><code># play1-&lt;module&gt;
Play 1 &lt;module&gt; module

Home page: http://&lt;user&gt;.github.io/play1-&lt;module&gt;/
</code></pre>
</li>
<li><p><code>vi LICENSE</code> (recommended for all GitHub repositories)</p></li>
<li>
<code>git status</code>: all files should be unstaged</li>
<li>Add all files recursively: <code>git add .</code>
</li>
<li>
<code>git status</code>: all files should be staged</li>
<li>Commit: <code>git commit -m "Play 1 &lt;module&gt; module &lt;version&gt;"</code>
</li>
<li>Tag project: <code>git tag &lt;tagname&gt;</code> (e.g. <code>git tag 0.1.0</code>)</li>
<li>
<code>git status</code>: all files should be committed i.e. on the master HEAD of the local copy</li>
</ol>

<h2>
<a id="appendix-e---publish-module-on-github" class="anchor" href="#appendix-e---publish-module-on-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixe"></a>Appendix E - Publish module on GitHub</h2>

<ol>
<li>Create repository in GitHub:

<ol>
<li>Log in GitHub</li>
<li>New repository</li>
<li>Name: <code>play1-&lt;module&gt;</code>
</li>
<li>Description (optional): Play 1 <code>&lt;module&gt;</code> module</li>
<li>Public</li>
<li>Create repository</li>
<li>Note the repository SSH URL: <code>git@github.com:&lt;user&gt;/play1-&lt;module&gt;.git</code>
</li>
</ol>
</li>
<li>Push local repository to GitHub one:

<ol>
<li><code>cd &lt;module&gt;</code></li>
<li>Associate GitHub (remote) repository with local one: <code>git remote add origin &lt;repository SSH URL&gt;</code>
</li>
<li>Push files from local repository to GitHub: <code>git push -u origin master</code>
</li>
<li>Push tag to remote: <code>git push origin &lt;tagname&gt;</code> (e.g. <code>git push origin 0.1.0</code>)</li>
</ol>
</li>
</ol>

<h2>
<a id="appendix-f---create-module-web-page-in-github" class="anchor" href="#appendix-f---create-module-web-page-in-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixf"></a>Appendix F - Create module web page in GitHub</h2>

<ol>
<li>
<code>cd &lt;module release directory&gt;</code> (where the module's zip file resides)</li>
<li>Convert module's textile documentation to GitHub's markdown: <code>pandoc &lt;path to module&gt;/documentation/manual/home.textile -t markdown -o home.md</code>
</li>
<li>In Github, go to the repository, press Settings and then automatic page generator</li>
<li>Copy/paste the contents of <code>home.md</code> onto the body</li>
<li>Press "Continue to layouts"</li>
<li>Select layout</li>
<li>Preview page and check that everything's ok, as GitHub Markdown is different from Markdown (adjust text if necessary)</li>
<li>Publish page</li>
</ol>

<h2>
<a id="appendix-g---module-registration-request-e-mail-template" class="anchor" href="#appendix-g---module-registration-request-e-mail-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a name="appendixg"></a>Appendix G - Module registration request e-mail template</h2>

<pre><code>Subject: [play-framework] [1.3.x] Module registration request: &lt;module&gt;
To: play-framework@googlegroups.com


Module name:
&lt;module&gt;

Display name:
&lt;module display name&gt;

Description:
The &lt;module display name&gt; module &lt;module's purpose&gt;.

Project home page:
http://&lt;user&gt;.github.io/&lt;module repository name on GitHub&gt;/
</code></pre>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>

<ul>
<li><a href="https://www.playframework.com/documentation/1.3.x/modules" target="_blank">Play modules</a></li>
<li><a href="https://www.packtpub.com/books/content/play-framework-introduction-writing-modules" target="_blank">Play Framework: Introduction to Writing Modules | PACKT Books</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sant0s/play1-module-howto">Creating and releasing a Play 1 module</a> is maintained by <a href="https://github.com/sant0s">sant0s</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-61205906-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

